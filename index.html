<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Ø´ÛŒÙ… Ú¯ÛŒØ±ÛŒ Ù¾Ú˜Ùˆ 405 XU7</title>

<style>
body {
  background: #0b0b0b;
  color: white;
  font-family: Tahoma;
  text-align: center;
  padding: 12px;
}

.box {
  max-width: 720px;
  margin: auto;
  background: #151515;
  padding: 15px;
  border-radius: 16px;
  box-shadow: 0 0 18px rgba(0,255,120,0.35);
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

th, td {
  border: 1px solid #333;
  padding: 8px;
  font-size: 14px;
}

th {
  background: #111;
}

input {
  width: 85px;
  padding: 6px;
  border-radius: 8px;
  border: none;
  text-align: center;
}

button {
  margin-top: 12px;
  padding: 12px 25px;
  border-radius: 12px;
  border: none;
  background: #00ff99;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
}

.result {
  color: #00ff99;
  font-weight: bold;
}

.footer {
  margin-top: 18px;
  font-size: 14px;
  color: #aaa;
}
</style>
</head>

<body>

<div class="box">
<h2>ğŸ›  Ø´ÛŒÙ… Ú¯ÛŒØ±ÛŒ Ù¾Ú˜Ùˆ 405 â€” XU7</h2>
<p>Ø¯ÙˆØ¯ = 0.45 | Ù‡ÙˆØ§/Ø¨Ù†Ø²ÛŒÙ† = 0.25 | Ø´ÛŒÙ… Ø¨Ø§Ø²Ø§Ø±: 2.00 ØªØ§ 4.00 (0.05)</p>

<table>
<tr>
<th>Ø³ÙˆÙ¾Ø§Ù¾</th>
<th>Ù†ÙˆØ¹</th>
<th>ÙÛŒÙ„Ø± Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ</th>
<th>Ø´ÛŒÙ… ÙØ¹Ù„ÛŒ</th>
<th>Ø´ÛŒÙ… Ù†Ù‡Ø§ÛŒÛŒ</th>
</tr>

<tbody id="rows"></tbody>
</table>

<button onclick="calcAll()">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‡Ù…Ù‡ Ø´ÛŒÙ…â€ŒÙ‡Ø§</button>

<div class="footer">ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ Ø¹Ø³Ø§Ú©Ø±Ù‡</div>
</div>

<script>
const valves = [
  {name:"1 Ù‡ÙˆØ§", type:"intake"},
  {name:"2 Ù‡ÙˆØ§", type:"intake"},
  {name:"3 Ù‡ÙˆØ§", type:"intake"},
  {name:"4 Ù‡ÙˆØ§", type:"intake"},
  {name:"1 Ø¯ÙˆØ¯", type:"exhaust"},
  {name:"2 Ø¯ÙˆØ¯", type:"exhaust"},
  {name:"3 Ø¯ÙˆØ¯", type:"exhaust"},
  {name:"4 Ø¯ÙˆØ¯", type:"exhaust"}
];

const tbody = document.getElementById("rows");

valves.forEach((v,i)=>{
  let row = document.createElement("tr");
  row.innerHTML = `
    <td>${v.name}</td>
    <td>${v.type === "intake" ? "Ù‡ÙˆØ§ / Ø¨Ù†Ø²ÛŒÙ†" : "Ø¯ÙˆØ¯"}</td>
    <td><input type="number" id="meas${i}" placeholder="Ù…Ø«Ù„Ø§Ù‹ 50 ÛŒØ§ 0.50"></td>
    <td><input type="number" value="3.00" id="shim${i}"></td>
    <td class="result" id="out${i}">â€”</td>
  `;
  tbody.appendChild(row);
});

function normalizeFiller(value){
  if(value > 5) return value / 100; // 50 â†’ 0.50
  return value;
}

function round005(val){
  return Math.round(val / 0.05) * 0.05;
}

function calcAll(){
  valves.forEach((v,i)=>{
    let measured = parseFloat(document.getElementById(`meas${i}`).value);
    let shimBase = parseFloat(document.getElementById(`shim${i}`).value);
    let out = document.getElementById(`out${i}`);

    if(isNaN(measured) || isNaN(shimBase)){
      out.innerText = "âŒ";
      return;
    }

    measured = normalizeFiller(measured);

    let target = v.type === "intake" ? 0.25 : 0.45;
    let diff = measured - target;

    let newShim;
    if(v.type === "exhaust"){
      newShim = shimBase + diff; // Ø¯ÙˆØ¯ â†’ Ø¶Ø®ÛŒÙ…â€ŒØªØ±
    } else {
      newShim = shimBase - diff; // Ù‡ÙˆØ§ â†’ Ù†Ø§Ø²Ú©â€ŒØªØ±
    }

    newShim = round005(newShim);

    let warn = "";
    if(newShim < 2.00) warn = " âš Ú©Ù…";
    if(newShim > 4.00) warn = " âš Ø²ÛŒØ§Ø¯";

    out.innerText = newShim.toFixed(2) + " mm" + warn;
  });
}
</script>

</body>
</html>
